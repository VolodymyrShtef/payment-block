(this.webpackJsonppayment_module=this.webpackJsonppayment_module||[]).push([[0],{179:function(e,r,n){"use strict";n.r(r);var t=n(0),c=n.n(t),a=n(26),s=n.n(a),i=(n(75),n(4)),d=n(12),l=function(e){return{type:"card/add",payload:{number:e.number,holder:e.holder,cvv:e.cvv,expM:e.expM,expY:e.expY,issuer:e.issuer}}},u=n(69),o=n(13),b=o.b().shape({number:o.c().matches(/^[0-9]+$/,"number required").min(16,"not enough numbers").max(16,"too many numbers").required("required"),holder:o.c().required("required"),cvv:o.c().matches(/^[0-9]+$/,"number required").min(3,"enter 3bits cvv code").max(3,"enter 3bits cvv code").required("required"),expM:o.a().min(1,"enter valid month").max(12,"enter valid month").typeError("enter number from 1 to 12").required("required"),expY:o.a().min(2021,"enter valid year").max(2030,"enter valid year").typeError("enter number from 2021 to 2030").required("required")}),j=n(1);function h(e){var r=e.onHideModal,n=e.onAddingCard,t=Object(d.b)(),c=Object(d.c)((function(e){return e}));return Object(j.jsx)("div",{className:"Overlay",children:Object(j.jsx)("div",{className:"Modal",id:"modal",children:Object(j.jsx)(u.a,{initialValues:{number:"",holder:"",cvv:"",expM:"",expY:"",issuer:""},onSubmit:function(e){!function(e){if(c.find((function(r){return r.number===e.number})))alert("This card number already exists");else{switch(e.number[0]){case"4":e.issuer="Visa";break;case"5":e.issuer="MasterCard";break;default:e.issuer="XYZ"}t(l(e)),n(10),r()}}(e)},validationSchema:b,children:function(e){var n=e.values,t=e.errors,c=e.touched,a=e.handleChange,s=e.handleBlur,i=e.handleSubmit,d=e.isValid,l=e.dirty;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("label",{children:["Card number:"," ",Object(j.jsx)("input",{type:"text",name:"number",value:n.number,onChange:a,onBlur:s,placeholder:"1234 5678 9876 5432"})]}),c.number&&t.number&&Object(j.jsx)("span",{children:t.number}),Object(j.jsx)("br",{}),Object(j.jsxs)("label",{children:["Cardholder name:"," ",Object(j.jsx)("input",{type:"text",name:"holder",value:n.holder,onChange:a,onBlur:s,placeholder:"John Gold"})]}),c.holder&&t.holder&&Object(j.jsx)("span",{children:t.holder}),Object(j.jsx)("br",{}),Object(j.jsxs)("label",{children:["CVV:"," ",Object(j.jsx)("input",{type:"text",name:"cvv",value:n.cvv,onChange:a,onBlur:s,placeholder:"007"})]}),c.cvv&&t.cvv&&Object(j.jsx)("span",{children:t.cvv}),Object(j.jsx)("br",{}),Object(j.jsxs)("label",{children:["Expiration date:"," ",Object(j.jsx)("input",{type:"text",name:"expM",value:n.expM,onChange:a,onBlur:s,placeholder:"month (1-12)"}),c.expM&&t.expM&&Object(j.jsx)("span",{children:t.expM}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",name:"expY",value:n.expY,onChange:a,onBlur:s,placeholder:"year (2021 +)",className:"yearInp"}),c.expY&&t.expY&&Object(j.jsx)("span",{children:t.expY})]}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{disabled:!d||!l,type:"submit",onClick:i,children:"Add card"}),Object(j.jsx)("button",{onClick:r,name:"cancel",children:"Cancel"})]})}})})})}var x=n.p+"static/media/mc_symbol.b720e3b5.svg",p=n.p+"static/media/visa.ae3d6ce0.svg",m=n.p+"static/media/debit-card.33067201.svg";var O=function(){var e=Object(t.useState)(!1),r=Object(i.a)(e,2),n=r[0],c=r[1],a=Object(t.useState)(!0),s=Object(i.a)(a,2),l=s[0],u=s[1],o=Object(t.useState)(!1),b=Object(i.a)(o,2),O=b[0],v=b[1],f=Object(t.useState)(!1),y=Object(i.a)(f,2),C=y[0],g=y[1],w=Object(t.useState)(0),M=Object(i.a)(w,2),k=M[0],V=M[1],Y=Object(d.c)((function(e){return e})),E=Y[k],_=E.number,S=E.holder,q=E.issuer,N=E.expM,T=E.expY,B=function(e){1!==e||k!==Y.length-1?V(-1!==e||0!==k?10!==e?function(){return k+e}:Y.length:Y.length-1):V(0)},I=function e(r){void 0!==r&&"Escape"!==r.code&&"cancel"!==r.currentTarget.name||(v(!1),window.removeEventListener("keydown",e))};return Object(j.jsxs)("div",{className:"allwrapper",children:[l&&Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:"You have 5 selected items"}),Object(j.jsx)("p",{children:"Total: 2000$"}),Object(j.jsx)("button",{onClick:function(){return c(!n)},children:"Check out"})]}),n&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Select a card for paying:"}),Object(j.jsxs)("div",{className:"cardwrapper",children:[Object(j.jsx)("button",{onClick:function(){return B(-1)},children:"Prev"}),Object(j.jsxs)("div",{className:"slider",id:_,onClick:function(e){!0===window.confirm("Finish the payment with card ".concat(e.currentTarget.id," ?"))&&(c(!n),c(!n),g(!C),u(!l))},children:[Object(j.jsx)("img",{src:"MasterCard"===Y[k].issuer?x:"Visa"===Y[k].issuer?p:m,alt:"symbol",width:"50"}),Object(j.jsxs)("div",{children:[" ",Object(j.jsx)("p",{children:S}),Object(j.jsx)("p",{children:_}),Object(j.jsx)("p",{children:q}),Object(j.jsxs)("span",{children:[N," / "]}),Object(j.jsx)("span",{children:T})]})]}),Object(j.jsx)("button",{onClick:function(){return B(1)},children:"Next"}),Object(j.jsx)("br",{})]})," ",Object(j.jsx)("button",{onClick:function(){v(!0),window.addEventListener("keydown",I)},children:"Add New Card"})]}),C&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{children:"Thank you!"}),Object(j.jsx)("p",{children:"Your payment was successful"}),Object(j.jsx)("p",{children:"You was charged 2000$"}),Object(j.jsxs)("p",{children:["Used card number: ",_]})]}),O&&Object(j.jsx)(h,{onHideModal:I,onAddingCard:B})]})},v=n(70),f=n(3),y=[{number:5421123412341234,holder:"Pupkin Vasya",issuer:"MasterCard",CVV:123,expM:"12",expY:"2022"},{number:0xfb4fd02803e01,holder:"Zaholupko Petro",issuer:"Visa",CVV:321,expM:"9",expY:"2023"},{number:0xfb4fd0280434e,holder:"Chapajev Ivan",issuer:"Visa",CVV:456,expM:"8",expY:"2021"}],C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,r=arguments.length>1?arguments[1]:void 0,n=r.type,t=r.payload;switch(n){case"card/add":return[].concat(Object(f.a)(e),[t]);default:return e}},g=Object(v.a)(C,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(d.a,{store:g,children:Object(j.jsx)(O,{})})}),document.getElementById("root"))},75:function(e,r,n){}},[[179,1,2]]]);
//# sourceMappingURL=main.fb2ee325.chunk.js.map