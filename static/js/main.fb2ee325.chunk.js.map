{"version":3,"sources":["redux/actions.js","components/validation.js","components/Modal.js","images/mc_symbol.svg","images/visa.svg","images/debit-card.svg","App.js","redux/initial.js","redux/reducer.js","redux/store.js","index.js"],"names":["addNewCard","type","payload","number","holder","cvv","expM","expY","issuer","validationsSchema","yup","shape","matches","min","max","required","typeError","Modal","onHideModal","onAddingCard","dispatch","useDispatch","cards","useSelector","state","className","id","initialValues","onSubmit","values","find","card","alert","doSubmit","validationSchema","errors","touched","handleChange","handleBlur","handleSubmit","isValid","dirty","name","value","onChange","onBlur","placeholder","disabled","onClick","App","useState","doPayment","changePayingView","summaryShow","changeSummaryView","modalShow","changeModalView","confirmShow","changeConfirmView","currentCard","changeCard","changeCurrentCardView","direction","length","hideModal","e","undefined","code","currentTarget","window","removeEventListener","confirm","src","MC","visa","noname","alt","width","addEventListener","initialData","CVV","reducer","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fb2ee325.chunk.js","sourcesContent":["const addNewCard = ({ number, holder, cvv, expM, expY, issuer }) => {\r\n  return {\r\n    type: \"card/add\",\r\n    payload: {\r\n      number: number,\r\n      holder: holder,\r\n      cvv: cvv,\r\n      expM: expM,\r\n      expY: expY,\r\n      issuer: issuer,\r\n    },\r\n  };\r\n};\r\n\r\nexport default addNewCard;\r\n","import * as yup from \"yup\";\r\n\r\nconst validationsSchema = yup.object().shape({\r\n  number: yup\r\n    .string()\r\n    .matches(/^[0-9]+$/, \"number required\")\r\n    .min(16, \"not enough numbers\")\r\n    .max(16, \"too many numbers\")\r\n    .required(\"required\"),\r\n  holder: yup.string().required(\"required\"),\r\n  cvv: yup\r\n    .string()\r\n    .matches(/^[0-9]+$/, \"number required\")\r\n    .min(3, \"enter 3bits cvv code\")\r\n    .max(3, \"enter 3bits cvv code\")\r\n    .required(\"required\"),\r\n  expM: yup\r\n    .number()\r\n    .min(1, \"enter valid month\")\r\n    .max(12, \"enter valid month\")\r\n    .typeError(\"enter number from 1 to 12\")\r\n    .required(\"required\"),\r\n  expY: yup\r\n    .number()\r\n    .min(2021, \"enter valid year\")\r\n    .max(2030, \"enter valid year\")\r\n    .typeError(\"enter number from 2021 to 2030\")\r\n    .required(\"required\"),\r\n});\r\nexport default validationsSchema;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport addNewCard from \"../redux/actions\";\r\nimport { Formik } from \"formik\";\r\nimport validationsSchema from \"./validation\";\r\n\r\nexport default function Modal({ onHideModal, onAddingCard }) {\r\n  const dispatch = useDispatch();\r\n  const cards = useSelector((state) => state);\r\n\r\n  const doSubmit = (values) => {\r\n    if (cards.find((card) => card.number === values.number)) {\r\n      alert(\"This card number already exists\");\r\n      return;\r\n    }\r\n    const checkNumber = values.number[0];\r\n    switch (checkNumber) {\r\n      case \"4\":\r\n        values.issuer = \"Visa\";\r\n        break;\r\n      case \"5\":\r\n        values.issuer = \"MasterCard\";\r\n        break;\r\n      default:\r\n        values.issuer = \"XYZ\";\r\n    }\r\n    dispatch(addNewCard(values));\r\n    onAddingCard(10);\r\n    onHideModal();\r\n  };\r\n\r\n  return (\r\n    <div className=\"Overlay\">\r\n      <div className=\"Modal\" id=\"modal\">\r\n        <Formik\r\n          initialValues={{\r\n            number: \"\",\r\n            holder: \"\",\r\n            cvv: \"\",\r\n            expM: \"\",\r\n            expY: \"\",\r\n            issuer: \"\",\r\n          }}\r\n          onSubmit={(values) => {\r\n            doSubmit(values);\r\n          }}\r\n          validationSchema={validationsSchema}\r\n        >\r\n          {({\r\n            values,\r\n            errors,\r\n            touched,\r\n            handleChange,\r\n            handleBlur,\r\n            handleSubmit,\r\n            isValid,\r\n            dirty,\r\n          }) => (\r\n            <>\r\n              <label>\r\n                Card number:{\" \"}\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"number\"\r\n                  value={values.number}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  placeholder=\"1234 5678 9876 5432\"\r\n                ></input>\r\n              </label>\r\n              {touched.number && errors.number && <span>{errors.number}</span>}\r\n              <br />\r\n              <label>\r\n                Cardholder name:{\" \"}\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"holder\"\r\n                  value={values.holder}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  placeholder=\"John Gold\"\r\n                ></input>\r\n              </label>\r\n              {touched.holder && errors.holder && <span>{errors.holder}</span>}\r\n              <br />\r\n              <label>\r\n                CVV:{\" \"}\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"cvv\"\r\n                  value={values.cvv}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  placeholder=\"007\"\r\n                ></input>\r\n              </label>\r\n              {touched.cvv && errors.cvv && <span>{errors.cvv}</span>}\r\n              <br />\r\n              <label>\r\n                Expiration date:{\" \"}\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"expM\"\r\n                  value={values.expM}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  placeholder=\"month (1-12)\"\r\n                />\r\n                {touched.expM && errors.expM && <span>{errors.expM}</span>}\r\n                <br />\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"expY\"\r\n                  value={values.expY}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  placeholder=\"year (2021 +)\"\r\n                  className=\"yearInp\"\r\n                />\r\n                {touched.expY && errors.expY && <span>{errors.expY}</span>}\r\n              </label>\r\n              <br />\r\n              <button\r\n                disabled={!isValid || !dirty}\r\n                type=\"submit\"\r\n                onClick={handleSubmit}\r\n              >\r\n                Add card\r\n              </button>\r\n              <button onClick={onHideModal} name=\"cancel\">\r\n                Cancel\r\n              </button>\r\n            </>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/mc_symbol.b720e3b5.svg\";","export default __webpack_public_path__ + \"static/media/visa.ae3d6ce0.svg\";","export default __webpack_public_path__ + \"static/media/debit-card.33067201.svg\";","import React, { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport Modal from \"./components/Modal\";\nimport MC from \"./images/mc_symbol.svg\";\nimport visa from \"./images/visa.svg\";\nimport noname from \"./images/debit-card.svg\";\n\nfunction App() {\n  const [doPayment, changePayingView] = useState(false);\n  const [summaryShow, changeSummaryView] = useState(true);\n  const [modalShow, changeModalView] = useState(false);\n  const [confirmShow, changeConfirmView] = useState(false);\n  const [currentCard, changeCard] = useState(0);\n  const cards = useSelector((state) => state);\n  const { number, holder, issuer, expM, expY } = cards[currentCard];\n\n  const changeCurrentCardView = (direction) => {\n    if (direction === 1 && currentCard === cards.length - 1) {\n      changeCard(0);\n      return;\n    }\n    if (direction === -1 && currentCard === 0) {\n      changeCard(cards.length - 1);\n      return;\n    }\n    if (direction === 10) {\n      changeCard(cards.length);\n      return;\n    }\n\n    changeCard(() => currentCard + direction);\n  };\n\n  const chooseCard = (e) => {\n    const conf = window.confirm(\n      `Finish the payment with card ${e.currentTarget.id} ?`\n    );\n    if (conf === true) {\n      changePayingView(!doPayment);\n      changePayingView(!doPayment);\n      changeConfirmView(!confirmShow);\n      changeSummaryView(!summaryShow);\n    }\n  };\n\n  const showAddCardForm = () => {\n    changeModalView(true);\n    window.addEventListener(\"keydown\", hideModal);\n  };\n\n  const hideModal = (e) => {\n    if (\n      e === undefined ||\n      e.code === \"Escape\" ||\n      e.currentTarget.name === \"cancel\"\n    ) {\n      changeModalView(false);\n      window.removeEventListener(\"keydown\", hideModal);\n    }\n  };\n\n  return (\n    <div className=\"allwrapper\">\n      {summaryShow && (\n        <div>\n          <p>You have 5 selected items</p>\n          <p>Total: 2000$</p>\n          <button onClick={() => changePayingView(!doPayment)}>\n            Check out\n          </button>\n        </div>\n      )}\n\n      {doPayment && (\n        <>\n          <h2>Select a card for paying:</h2>\n          <div className=\"cardwrapper\">\n            <button onClick={() => changeCurrentCardView(-1)}>Prev</button>\n            <div className=\"slider\" id={number} onClick={chooseCard}>\n              <img\n                src={\n                  cards[currentCard].issuer === \"MasterCard\"\n                    ? MC\n                    : cards[currentCard].issuer === \"Visa\"\n                    ? visa\n                    : noname\n                }\n                alt=\"symbol\"\n                width=\"50\"\n              />\n              <div>\n                {\" \"}\n                <p>{holder}</p>\n                <p>{number}</p>\n                <p>{issuer}</p>\n                <span>{expM} / </span>\n                <span>{expY}</span>\n              </div>\n            </div>\n            <button onClick={() => changeCurrentCardView(1)}>Next</button>\n            <br />\n          </div>{\" \"}\n          <button onClick={showAddCardForm}>Add New Card</button>\n        </>\n      )}\n\n      {confirmShow && (\n        <>\n          <h1>Thank you!</h1>\n          <p>Your payment was successful</p>\n          <p>You was charged 2000$</p>\n          <p>Used card number: {number}</p>\n        </>\n      )}\n\n      {modalShow && (\n        <Modal onHideModal={hideModal} onAddingCard={changeCurrentCardView} />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","const initialData = [\r\n  {\r\n    number: 5421123412341234,\r\n    holder: \"Pupkin Vasya\",\r\n    issuer: \"MasterCard\",\r\n    CVV: 123,\r\n    expM: \"12\",\r\n    expY: \"2022\",\r\n  },\r\n  {\r\n    number: 4421123412344321,\r\n    holder: \"Zaholupko Petro\",\r\n    issuer: \"Visa\",\r\n    CVV: 321,\r\n    expM: \"9\",\r\n    expY: \"2023\",\r\n  },\r\n  {\r\n    number: 4421123412345678,\r\n    holder: \"Chapajev Ivan\",\r\n    issuer: \"Visa\",\r\n    CVV: 456,\r\n    expM: \"8\",\r\n    expY: \"2021\",\r\n  },\r\n];\r\n\r\nexport default initialData;\r\n","import initialData from \"./initial\";\r\n\r\nconst reducer = (state = initialData, { type, payload }) => {\r\n  switch (type) {\r\n    case \"card/add\":\r\n      return [...state, payload];\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { createStore } from \"redux\";\r\nimport reducer from \"./reducer\";\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}